<?php
// http://localhost/PHP_labs/php_laba_1/2/Lab_6.1/session.php

// Задание 1 
// По заходу на страницу запишите в сессию текст 'test'. Затем обновите страницу и выведите содержимое сессии на экран.

// Запускаем сессию
session_start();

// // Проверяем, установлена ли сессия
// if (!isset($_SESSION['test'])) {
//   // Если сессия не установлена, записываем в нее текст 'test'
//   $_SESSION['test'] = 'test';
//   echo "Сессия установлена. Обновите страницу.";
// } else {
//   // Если сессия установлена, выводим ее содержимое на экран
//   echo "Содержимое сессии: " . $_SESSION['test'];
// }





// // Задание 2 
// // Пусть у вас есть две страницы сайта. Запишите на первой странице что-нибудь в сессию, а затем выведите это при заходе на другую страницу.

// // Страница 1: session.php
// session_start(); // Обязательно запускаем сессию

// // Записываем что-то в сессию
// $_SESSION['username'] = 'John Doe';
// $_SESSION['favorite_color'] = 'Blue';

// echo "Данные записаны в сессию. Перейдите на <a href='session2.php'>вторую страницу</a>.";





// // Задание 3
// // Сделайте счетчик обновления страницы пользователем. Данные храните в сессии. Скрипт должен выводить на экран количество обновлений. При первом заходе на страницу он должен вывести сообщение о том, что вы еще не обновляли страницу.

// // Ключ для хранения счетчика в сессии
// $session_key = 'refresh_count';

// // Проверяем, существует ли счетчик в сессии
// if (!isset($_SESSION[$session_key])) {
//     // Если не существует, значит это первый заход на страницу
//     $_SESSION[$session_key] = 0;
//     echo "Вы еще не обновляли страницу.";
// } else {
//     // Если существует, увеличиваем счетчик на 1
//     $_SESSION[$session_key]++;

//     // Выводим количество обновлений
//     echo "Вы обновили страницу " . $_SESSION[$session_key] . " раз(а).";
// }





// Задание 5 

// Запишите в сессию время захода пользователя на сайт. При обновлении страницы выводите сколько секунд назад пользователь зашел на сайт.

// Проверяем, установлена ли сессионная переменная с временем захода
if (!isset($_SESSION['login_time'])) {
  // Если не установлена, записываем текущее время в сессию
  $_SESSION['login_time'] = time();
  echo "Добро пожаловать на сайт! Это ваш первый визит в текущей сессии.<br>";
} else {
  // Если установлена, вычисляем разницу во времени
  $login_time = $_SESSION['login_time'];
  $current_time = time();
  $time_diff = $current_time - $login_time;

  echo "Вы зашли на сайт " . $time_diff . " секунд назад.<br>";
}

echo "<br><a href='" . $_SERVER['PHP_SELF'] . "'>Обновить страницу</a>";

?>

